(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f056cb6"],{"045d":function(t,e,a){"use strict";var n=a("4d6e"),s=a.n(n);s.a},"4d6e":function(t,e,a){},"72ab":function(t,e,a){},7826:function(t,e,a){"use strict";var n=a("a026"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"msgAlert"},[a("h2",{domProps:{textContent:t._s(t.title)}}),a("p",{domProps:{textContent:t._s(t.content)}}),a("div",{staticClass:"btns"},[t.cancel?a("div",{domProps:{textContent:t._s(t.cancel)},on:{touchstart:t.handleCancel}}):t._e(),t.ok?a("div",{domProps:{textContent:t._s(t.ok)},on:{touchstart:t.handleOk}}):t._e()])])},o=[],r={name:"msgAlert"},i=r,l=(a("a0eb"),a("2877")),d=Object(l["a"])(i,s,o,!1,null,"6f6bcb86",null),c=d.exports;a.d(e,"a",function(){return u});var u=function(){var t=n["default"].extend(c);return function(e){var a={title:"",content:"",cancel:"",ok:"",handleCancel:null,handleOk:null};for(var n in e)a[n]=e[n];var s=new t({el:document.createElement("div"),data:{title:a.title,content:a.content,cancel:a.cancel,ok:a.ok},methods:{handleCancel:function(){a.handleCancel&&a.handleCancel.call(this),document.body.removeChild(s.$el)},handleOk:function(){a.handleOk&&a.handleOk.call(this),document.body.removeChild(s.$el)}}});document.body.appendChild(s.$el)}}()},a0eb:function(t,e,a){"use strict";var n=a("72ab"),s=a.n(n);s.a},cca4:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"center"},[t._m(0),a("div",[a("h3",[t._v("当前用户名: "),a("span",{domProps:{textContent:t._s(t.$store.state.user.name)}})]),a("div",[a("input",{staticClass:"file",attrs:{type:"file",name:"file",vaule:"上传头像"},on:{change:t.handleToUpload}}),a("img",{staticClass:"userImg",attrs:{src:t.$store.state.user.userHead,alt:"图片"}})]),a("div",[a("button",{attrs:{type:"button"},on:{touchstart:t.handelToLogout}},[t._v("退出")])])]),a("div",[t.$store.state.user.isAdmin?a("div",[t._v("用户身份:管理员 "),a("router-link",{attrs:{to:"/admin",target:"_blank"}},[t._v("进入后台管理")])],1):a("div",[t._v("用户身份:普通用户")])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("h2",[t._v("个人中心")])])}],o=(a("7f7f"),a("bc3a")),r=a.n(o),i=a("7826"),l={name:"center",created:function(){},methods:{handelToLogout:function(){var t=this;this.axios.get("/api2/users/logout").then(function(e){var a=e.data.status;0===a&&(localStorage.removeItem("name"),localStorage.removeItem("isAdmin"),t.$store.commit("user/userName",{name:"",isAdmin:!1,userHead:""}),t.$router.push("/mine/login"))})},handleToUpload:function(t){var e=this;alert(1);var a=t.target.files[0],n=new FormData;n.append("file",a,a.name),console.log(n);var s={headers:{"Content-Type":"multipart/form-data"}};this.axios.post("/api2/users/uploadUserHead",n,s).then(function(t){alert(2);var a=t.data.status,n=e;0===a?Object(i["a"])({title:"头像",content:"上传头像成功",ok:"确定",handleOk:function(){n.$store.commit("user/userName",{name:n.$store.state.user.name,isAdmin:n.$store.state.user.isAdmin,userHead:t.data.data.userHead+"?"+Math.random()})}}):Object(i["a"])({title:"头像",content:"上传头像失败",ok:"确定"})})}},beforeRouteEnter:function(t,e,a){r.a.get("/api2/users/getUser").then(function(t){var e=t.data.status;a(0===e?function(e){localStorage.setItem("name",t.data.data.username),localStorage.setItem("isAdmin",t.data.data.isAdmin),e.$store.commit("user/userName",{name:t.data.data.username,isAdmin:t.data.data.isAdmin,userHead:t.data.data.userHead})}:"/mine/login")})},computed:{},components:{}},d=l,c=(a("045d"),a("2877")),u=Object(c["a"])(d,n,s,!1,null,"1f3b702f",null);e["default"]=u.exports}}]);